<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  <title>
    
    Hexo
  </title>
  <!-- Icon -->
  
    <link rel="shortcut icon" href="/favicon.ico">
    
  
<link rel="stylesheet" href="/css/style.css">

  
  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<script src="/js/pace.min.js"></script>

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <main class="content">
    <section class="jumbotron">
  <div class="video">
    
    <div class="video-frame">
      <img src="/images/ocean/overlay-hero.png" alt="Decorative image frame">
    </div>
    
    <div class="video-media">
      <video playsinline="" autoplay="" loop="" muted="" data-autoplay="" poster="/images/ocean/ocean.png"
        x5-video-player-type="h5">
        <source src="/images/ocean/ocean.mp4" type="video/mp4">
        <source src="/images/ocean/ocean.ogv" type="video/ogg">
        <source src="/images/ocean/ocean.webm" type="video/webm">
        <p>Your user agent does not support the HTML5 Video element.</p>
      </video>
      <div class="video-overlay"></div>
    </div>
    <div class="video-inner text-center text-white">
      <h1><a href="/">Hexo</a></h1>
      <p></p>
      <div><img src="/images/hexo-inverted.svg" class="brand" alt="Hexo"></div>
    </div>
    <div class="video-learn-more">
      <a class="anchor" href="#landingpage"><i class="fe fe-mouse"></i></a>
    </div>
  </div>
</section>
<div id="landingpage">
  <section class="outer">
  <article class="articles">
    
    <h1 class="page-type-title"></h1>
    
    
    <article id="post-tailwindcsså“åº”å¼é…ç½®" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    

    
    <div class="article-meta">
      <a href="/2023/06/02/tailwindcss%E5%93%8D%E5%BA%94%E5%BC%8F%E9%85%8D%E7%BD%AE/" class="article-date">
  <time datetime="2023-06-02T07:41:56.831Z" itemprop="datePublished">2023-06-02</time>
</a>
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      
      
        
      
      
        <p>å®˜ç½‘æ˜¯å¦‚ä½•ä½¿ç”¨tailwindcssç¼–å†™æ ·å¼çš„</p>
<h2 id="tailwindcssåŸºæœ¬ä»‹ç»"><a href="#tailwindcssåŸºæœ¬ä»‹ç»" class="headerlink" title="tailwindcssåŸºæœ¬ä»‹ç»"></a>tailwindcssåŸºæœ¬ä»‹ç»</h2><p><a target="_blank" rel="noopener" href="https://tailwindcss.com/">Tailwind CSS</a> æ˜¯ä¸€ä¸ªå°†**å®ç”¨åŸå­ç±»(Atomic Utility First Class)**å‘æŒ¥åˆ°æè‡´çš„ CSS æ¡†æ¶ã€‚</p>
<p>Tailwindcssv3.0å°†2.0 just in timeæ¨¡å¼è®¾ç½®ä¸ºäº†é»˜è®¤é¡¹ï¼Œç°åœ¨ä»–èƒ½å¤Ÿæ‰«æè§„åˆ™é…ç½®ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä»¥æŸ¥æ‰¾ç±»åï¼Œç”Ÿæˆé™æ€cssæ–‡ä»¶ã€‚</p>
<p>å®ƒå¿«é€Ÿã€çµæ´»ä¸”å¯é â€”â€”è¿è¡Œæ—¶é—´ä¸ºé›¶ã€‚</p>
<p>è¿™ç§æŒ‰éœ€å¼•å…¥çš„ç‰¹æ€§ä½¿å¾—æˆ‘ä»¬å¿…é¡»æ³¨æ„ï¼š</p>
<p>1,ä¸èƒ½æ‹¼æ¥tailwindcssç±»å e.g:<code>mt-[$&#123;size === &#39;lg&#39; ? &#39;22px&#39; : &#39;17px&#39; &#125;]</code></p>
<p>2,ä¸è¦åŠ¨æ€è®¡ç®—ä»»æ„å€¼ e.g:bg-[]</p>
<p>3,ä¸è¦ä½¿ç”¨ç©ºæ ¼ e.g:h-[calc(1000px - 4rem)] &#x2F;&#x2F;åˆ é™¤ç©ºæ ¼ï¼Œtailwindä¼šå¤„ç†calcè‡ªåŠ¨åŠ ä¸Šç©ºæ ¼</p>
<p>4,æ›´å…·ä½“çš„ä½¿ç”¨csså˜é‡ e.g :text-[color:var(â€“mystery-var)]</p>
<p><a target="_blank" rel="noopener" href="https://xiaomi.f.mioffice.cn/docs/dock4GXgK3DuapUQoagMtBnFHIL">ä¸ºä»€ä¹ˆæˆ‘ä»¬ä½¿ç”¨ Tailwind CSS æ„å»ºé¡¹ç›®</a> </p>
<p>ä¸Šæ–‡ä¸­æåˆ°çš„å…³äºclsxå¯¹åŸå­ç±»çš„å†æ¬¡ç»„åˆå®é™…ä¸Šæ˜¯tailwindcssä¸æ¨èçš„ã€‚</p>
<p>åœ¨3.0æ–‡æ¡£ä¸­ä½œè€…æå‡º<a target="_blank" rel="noopener" href="https://code.visualstudio.com/docs/editor/codebasics#_multiple-selections-multicursor">Multi-cursor editing</a>æ‰æ˜¯æ­£ç¡®çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h2 id="tailwindcssåŸºæœ¬é…ç½®"><a href="#tailwindcssåŸºæœ¬é…ç½®" class="headerlink" title="tailwindcssåŸºæœ¬é…ç½®"></a>tailwindcssåŸºæœ¬é…ç½®</h2><p>miui13ä¸­çš„tailwind-config.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;jit&#x27;</span>, <span class="comment">//just in timeæ¨¡å¼ï¼Œåœ¨3.0å¯ä»¥åˆ é™¤ã€‚</span></span><br><span class="line">  <span class="attr">purge</span>: [<span class="string">&#x27;./pages/**/*.&#123;js,ts,jsx,tsx&#125;&#x27;</span>, <span class="string">&#x27;./components/**/*.&#123;js,ts,jsx,tsx&#125;&#x27;</span>],</span><br><span class="line">   <span class="comment">//3.0æ”¹ä¸ºcontentï¼š,æŒ‡å‘éœ€è¦æ‰«æçš„ç›®æ ‡æ–‡ä»¶ã€‚</span></span><br><span class="line">  <span class="attr">darkMode</span>: <span class="string">&#x27;class&#x27;</span>, <span class="comment">// or &#x27;media&#x27; or &#x27;class&#x27;</span></span><br><span class="line">  <span class="attr">presets</span>: [<span class="built_in">require</span>(<span class="string">&#x27;./tailwind-presets&#x27;</span>)],<span class="comment">//åˆ›å»ºæ‚¨è‡ªå·±çš„å¯é‡ç”¨é…ç½®é¢„è®¾ã€‚</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">theme</span>: &#123;</span><br><span class="line">  <span class="comment">//è‡ªè¡Œé…ç½®çš„é¢„è®¾ä¼šè¦†ç›–é»˜è®¤é¢„è®¾ï¼Œè¯·å®Œæ•´é…ç½®å•ä¸ªé¢„è®¾æˆ–è€…ä½¿ç”¨extendæ‰©å±•ã€‚</span></span><br><span class="line">    <span class="attr">fontFamily</span>: &#123;</span><br><span class="line">      <span class="attr">sans</span>: <span class="string">`MiSans, system-ui, &#x27;å¾®è½¯é›…é»‘&#x27;, sans-serif`</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">screens</span>: <span class="built_in">require</span>(<span class="string">&#x27;./screens&#x27;</span>),</span><br><span class="line">    <span class="comment">// ç§»é™¤é»˜è®¤çš„ fontsize, å°†åœ¨ typography.js å®šä¹‰å“åº”å¼çš„ fontsize</span></span><br><span class="line">    <span class="attr">fontSize</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">extend</span>:&#123;&#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">  <span class="comment">//å¯ä»¥é€šè¿‡pluginæ–¹æ³•é…ç½®æ’ä»¶</span></span><br><span class="line">  <span class="title function_">plugin</span>(<span class="keyword">function</span>(<span class="params">&#123; addUtilities, addComponents,addBase,theme &#125;</span>) &#123;</span><br><span class="line">      <span class="comment">//å¯ä»¥åœ¨æ­¤å¤„é…ç½®æ’ä»¶ï¼Œå¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</span></span><br><span class="line">      <span class="title function_">addUtilities</span>() <span class="comment">//ä½¿ç”¨ CSS-in-JS è¯­æ³• ç¼–å†™æ ·å¼ã€‚</span></span><br><span class="line">      <span class="keyword">const</span> newUtilities = &#123;</span><br><span class="line">        <span class="string">&#x27;.skew-10deg&#x27;</span>: &#123;</span><br><span class="line">          <span class="attr">transform</span>: <span class="string">&#x27;skewY(-10deg)&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&#x27;.skew-15deg&#x27;</span>: &#123;</span><br><span class="line">          <span class="attr">transform</span>: <span class="string">&#x27;skewY(-15deg)&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="title function_">addUtilities</span>(newUtilities)</span><br><span class="line">      </span><br><span class="line">      <span class="title function_">addBase</span>() <span class="comment">//å¢æ·»å…¨å±€æ ·å¼</span></span><br><span class="line">      <span class="title function_">addComponents</span>() <span class="comment">//ç”¨å®ƒæ¥æ·»åŠ æ›´ä¸ªæ€§åŒ–ã€æ›´å¤æ‚çš„ç±»ï¼Œæ¯”å¦‚æŒ‰é’®ã€è¡¨å•æ§ä»¶ã€è­¦å‘Šç­‰ã€‚</span></span><br><span class="line">      <span class="title function_">theme</span>() <span class="comment">//ç”¨äºåœ¨ç”¨æˆ·çš„ä¸»é¢˜é…ç½®ä¸­æŸ¥æ‰¾å€¼,ä¾‹å¦‚æŸ¥è¯¢å“åº”å¼çš„æ–­ç‚¹</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="built_in">require</span>(<span class="string">&#x27;./typography&#x27;</span>),</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">corePlugins</span>: &#123;</span><br><span class="line">    <span class="comment">// ç§»é™¤é»˜è®¤çš„ container, ä½¿ç”¨ safe-area ä»£æ›¿</span></span><br><span class="line">    <span class="attr">container</span>: <span class="literal">false</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">â”œâ”€tailwind-presets <span class="comment">//è‡ªè¡Œæ·»åŠ çš„é…ç½®å°†ä¼šè¦†ç›–é»˜è®¤é…ç½®ã€‚</span></span><br><span class="line">â”‚      border-radius.<span class="property">js</span> <span class="comment">//addBaseæ·»åŠ äº†ä¸€ä¸ªå…¨å±€çš„border-radius</span></span><br><span class="line">â”‚      button.<span class="property">js</span> <span class="comment">//addComponentsæ·»åŠ äº†ä¸€ä¸ªé¢„è®¾button</span></span><br><span class="line">â”‚      colors.<span class="property">js</span> <span class="comment">//é¢„è®¾é¢œè‰²</span></span><br><span class="line">â”‚      h-section.<span class="property">js</span> <span class="comment">//addUtilitiesæ·»åŠ äº†é¢„è®¾åŸå­ç±»</span></span><br><span class="line">â”‚      index.<span class="property">js</span> <span class="comment">//å¦‚ä¸Šå›¾</span></span><br><span class="line">â”‚      opacity.<span class="property">js</span> <span class="comment">//é¢„è®¾é€æ˜åº¦ é€æ˜åº¦å¯ä»¥å¿«æ·å†™åœ¨å…¶ä»–åŸå­ç±»ä¹‹å</span></span><br><span class="line">                      <span class="comment">// bg-red-500 bg-opacity-25 = bg-red-500/25</span></span><br><span class="line">â”‚      safe-area.<span class="property">js</span> <span class="comment">//addComponentsæ·»åŠ äº†ä¸€ä¸ªé¢„è®¾é˜²æ­¢flexæŒ¤å‹çš„box</span></span><br><span class="line">â”‚      screens.<span class="property">js</span> <span class="comment">//å“åº”å¼æ–­ç‚¹</span></span><br><span class="line">â”‚      spacing.<span class="property">js</span> <span class="comment">//ä¸‹æ–‡æåˆ°ï¼Œæ›´æ”¹é¢„è®¾çš„æ•°å€¼ä¸å®é™…è·ç¦»å¯¹åº”å…³ç³»</span></span><br><span class="line">â”‚      typography.<span class="property">js</span> <span class="comment">//addUtilitiesæ·»åŠ äº†é¢„è®¾åŸå­ç±»-æ–‡å­—ï¼Œå¹¶åšäº†å“åº”å¼å¤„ç†</span></span><br></pre></td></tr></table></figure>

<h2 id="å“åº”å¼é…ç½®"><a href="#å“åº”å¼é…ç½®" class="headerlink" title="å“åº”å¼é…ç½®"></a>å“åº”å¼é…ç½®</h2><h4 id="1-è®¾ç½®æ–­ç‚¹"><a href="#1-è®¾ç½®æ–­ç‚¹" class="headerlink" title="1,è®¾ç½®æ–­ç‚¹"></a>1,è®¾ç½®æ–­ç‚¹</h4><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">module.<span class="built_in">exports</span> = &#123;</span><br><span class="line">  xxxs: <span class="string">&#x27;360px&#x27;</span>,</span><br><span class="line">  xxs: <span class="string">&#x27;410px&#x27;</span>,</span><br><span class="line">  xs: <span class="string">&#x27;480px&#x27;</span>,</span><br><span class="line">  sm: <span class="string">&#x27;680px&#x27;</span>,</span><br><span class="line">  tablet: <span class="string">&#x27;680px&#x27;</span>,</span><br><span class="line">  md: <span class="string">&#x27;968px&#x27;</span>,</span><br><span class="line">  desktop: <span class="string">&#x27;1024px&#x27;</span>,</span><br><span class="line">  lg: <span class="string">&#x27;1024px&#x27;</span>,</span><br><span class="line">  xl: <span class="string">&#x27;1440px&#x27;</span>,</span><br><span class="line">  <span class="number">2</span>xl: <span class="string">&#x27;1920px&#x27;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>tailwindcss</strong>ä½¿ç”¨å±å¹•æ–­ç‚¹ä½œä¸ºå‰ç¼€å¯ä»¥åœ¨å±å¹•å®½åº¦ç¬¦åˆæ¡ä»¶æ—¶è¦†ç›–åŸæœ‰æ ·å¼ã€‚</p>
<p>å®é™…å¼€å‘æ—¶ï¼Œéœ€è¦éµå¾ªæœ€å°å°ºå¯¸ä¼˜å…ˆçš„ç­–ç•¥ã€‚å³å…ˆç¼–å†™æœ€å°å®½åº¦çš„æ ·å¼ï¼Œåœ¨é€æ­¥æ‰©å¤§å®½åº¦çš„è¿‡ç¨‹ä¸­ä½¿ç”¨å¸¦æ–­ç‚¹çš„å‰ç¼€â€œæ‰“è¡¥ä¸â€ã€‚ä½¿ç”¨è¿™ç§æ¨¡å¼å¤§å¤§é™ä½äº†å“åº”å¼å¼€å‘çš„é—¨æ§›ï¼Œå¼€å‘æ•ˆç‡éå¸¸é«˜ã€‚</p>
<p>æ‹¿å®˜ç½‘çš„navæ¥ä¸¾ä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;nav <span class="keyword">class</span>=<span class="string">&quot;fixed top-0 left-0 z-50 w-full transition </span></span><br><span class="line"><span class="string">hidden desktop:block //å·¦ä¾§å°äºdesktopæ–­ç‚¹åº”ç”¨hiddenå³displayï¼šhiddenï¼Œ</span></span><br><span class="line"><span class="string">text-white  bg-black/80 backdrop-blur-2xl&quot;</span>&gt;</span><br></pre></td></tr></table></figure>

<p><img src="/2023/06/02/tailwindcss%E5%93%8D%E5%BA%94%E5%BC%8F%E9%85%8D%E7%BD%AE/1.png"><img src="/2023/06/02/tailwindcss%E5%93%8D%E5%BA%94%E5%BC%8F%E9%85%8D%E7%BD%AE/2.png"></p>
<p>å·¦ä¾§ä¸º390*844çª—å£ï¼Œå³ä¾§æµè§ˆå™¨è§†å£ï¼ˆwidth&gt;1024pxï¼‰ï¼Œdesktopï¼š1024px</p>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œåœ¨3.0ä¸­æ·»åŠ äº†ä¸€ä¸ªæ–°<code>max-*</code>å˜ä½“ï¼Œå¯è®©æ‚¨æ ¹æ®é…ç½®çš„æ–­ç‚¹åº”ç”¨æœ€å¤§å®½åº¦åª’ä½“æŸ¥è¯¢ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;md:sr-only xl:not-sr-only&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ... --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;md:max-xl:sr-only&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ... --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">// mdï¼šä¸ºå¤§äºæ–­ç‚¹åº”ç”¨æ ·å¼ï¼Œmax-xlï¼šä¸ºå°äºæ–­ç‚¹åº”ç”¨æ ·å¼ã€‚æˆ‘ä»¬ç°åœ¨å¯ä»¥æ–¹ä¾¿åœ¨åŒºåŸŸåº”ç”¨æ ·å¼äº†ã€‚</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;min-[712px]:max-[877px]:right-16 ...&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ... --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">// å¯ä»¥æ›´çµæ´»åœ°ç”¨æ•°å€¼é…ç½®æ–­ç‚¹ã€‚</span><br></pre></td></tr></table></figure>

<h4 id="2-åœ¨pluginä¸­é…ç½®"><a href="#2-åœ¨pluginä¸­é…ç½®" class="headerlink" title="2,åœ¨pluginä¸­é…ç½®"></a>2,åœ¨pluginä¸­é…ç½®</h4><p>ä»¥å­—ä½“æ–‡ä»¶ä¸ºä¾‹</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> plugin = <span class="built_in">require</span>(<span class="string">&#x27;tailwindcss/plugin&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">BASE_FONT_SIZE</span> = <span class="number">16</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">toRem</span>(<span class="params">px</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (px / <span class="variable constant_">BASE_FONT_SIZE</span>).<span class="title function_">toFixed</span>(<span class="number">3</span>) + <span class="string">&#x27;rem&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">plugin</span>(<span class="function">(<span class="params">&#123; addBase, addUtilities, theme &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">   <span class="keyword">const</span> textStylesMobile = &#123;</span><br><span class="line">    <span class="string">&#x27;.text-h1&#x27;</span>: &#123;</span><br><span class="line">      <span class="attr">fontSize</span>: <span class="title function_">toRem</span>(<span class="number">44</span>),</span><br><span class="line">      <span class="attr">lineHeight</span>: <span class="title function_">toRem</span>(<span class="number">58</span>),</span><br><span class="line">      <span class="attr">fontWeight</span>: <span class="number">650</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&#x27;.text-h1-s&#x27;</span>: &#123;</span><br><span class="line">      <span class="attr">fontSize</span>: <span class="title function_">toRem</span>(<span class="number">36</span>),</span><br><span class="line">      <span class="attr">lineHeight</span>: <span class="title function_">toRem</span>(<span class="number">48</span>),</span><br><span class="line">      <span class="attr">fontWeight</span>: <span class="number">650</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">addUtilities</span>(textStylesMobile);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> textStylesTablet = &#123;</span><br><span class="line">    <span class="string">&#x27;.text-h1&#x27;</span>: &#123;</span><br><span class="line">      <span class="attr">fontSize</span>: <span class="title function_">toRem</span>(<span class="number">48</span>),</span><br><span class="line">      <span class="attr">lineHeight</span>: <span class="title function_">toRem</span>(<span class="number">64</span>),</span><br><span class="line">      <span class="attr">fontWeight</span>: <span class="number">650</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&#x27;.text-h1-s&#x27;</span>: &#123;</span><br><span class="line">      <span class="attr">fontSize</span>: <span class="title function_">toRem</span>(<span class="number">36</span>),</span><br><span class="line">      <span class="attr">lineHeight</span>: <span class="title function_">toRem</span>(<span class="number">48</span>),</span><br><span class="line">      <span class="attr">fontWeight</span>: <span class="number">650</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">addUtilities</span>(</span><br><span class="line">      <span class="comment">// åšè¿™ä¸ªå¤„ç†æ˜¯ä¸ºäº†èƒ½è®© tailwindcss vscode æ’ä»¶å¯ä»¥æ­£ç¡®è¯†åˆ«</span></span><br><span class="line">      <span class="title class_">Object</span>.<span class="title function_">keys</span>(textStylesTablet).<span class="title function_">map</span>(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          [<span class="string">`@media (min-width: <span class="subst">$&#123;breakpoints.tablet&#125;</span>)`</span>]: &#123;</span><br><span class="line">            [key]: textStylesTablet[key],</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;)</span><br><span class="line">    );</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>ä¸¾ä¾‹æ¥è¯´ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex flex-col items-start overflow-hidden </span></span></span><br><span class="line"><span class="string"><span class="tag">desktop:flex-row desktop:justify-center //é€šè¿‡æ–­ç‚¹æ”¹å˜äº†flexå¸ƒå±€</span></span></span><br><span class="line"><span class="string"><span class="tag">&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;text-center mx-auto desktop:text-left desktop:mx-0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">&quot;text-white text-h2 desktop:max-w-160&quot;</span>&gt;</span>è¿åŠ¨æ•°æ® å®æ—¶åŒæ­¥<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;mt-16 text-body text-white/60 max-w-320 tablet:max-w-332 </span></span></span><br><span class="line"><span class="string"><span class="tag">        mx-auto desktop:ml-0 desktop:max-w-300&quot;</span>&gt;</span></span><br><span class="line">            ç©¿æˆ´è®¾å¤‡å’Œç±³å®¶è·‘æ­¥æœºæ•°æ®äº’è”ï¼Œç”µè§†åœ¨æŠ•å±è¯¾ç¨‹çš„åŒæ—¶å¯ä»¥å®æ—¶å±•ç¤ºå½“å‰çš„è¿åŠ¨</span><br><span class="line">            æ•°æ®ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&#x27;...&#x27;</span>&gt;</span>...å›¾ç‰‡...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2023/06/02/tailwindcss%E5%93%8D%E5%BA%94%E5%BC%8F%E9%85%8D%E7%BD%AE/3.png"><img src="/2023/06/02/tailwindcss%E5%93%8D%E5%BA%94%E5%BC%8F%E9%85%8D%E7%BD%AE/4.png"></p>
<p><img src="/2023/06/02/tailwindcss%E5%93%8D%E5%BA%94%E5%BC%8F%E9%85%8D%E7%BD%AE/5.png"></p>
<p>å¯ä»¥è§‚å¯Ÿåˆ°text-h2æ˜¯ä¸€ä¸ªå“åº”å¼çš„ç±»ã€‚</p>
<p>å¦å¤–<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/matchMedia">matchMedia</a>æ–¹æ³•ä¹Ÿèƒ½å¤Ÿä¸ºå“åº”å¼åŠé»‘æš—æ¨¡å¼æä¾›å¸®åŠ©ï¼›</p>
<h2 id="å¸¸ç”¨æ ·å¼åŠå¸ƒå±€"><a href="#å¸¸ç”¨æ ·å¼åŠå¸ƒå±€" class="headerlink" title="å¸¸ç”¨æ ·å¼åŠå¸ƒå±€"></a>å¸¸ç”¨æ ·å¼åŠå¸ƒå±€</h2><p>åœ¨å¼€å‘ä¸­çš„<code>tailwind.config.js</code>ä¸­ <code>theme</code> éƒ¨åˆ†ä½¿ç”¨ <code>spacing</code> é”®æ¥å®šåˆ¶ Tailwind çš„<a target="_blank" rel="noopener" href="https://www.tailwindcss.cn/docs/customizing-spacing#default-spacing-scale">é»˜è®¤é—´è·&#x2F;å¤§å°æ¯”ä¾‹</a>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">theme</span>: &#123;</span><br><span class="line">    <span class="attr">spacing</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;1&#x27;</span>: <span class="string">&#x27;8px&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;2&#x27;</span>: <span class="string">&#x27;12px&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;3&#x27;</span>: <span class="string">&#x27;16px&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;4&#x27;</span>: <span class="string">&#x27;24px&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;5&#x27;</span>: <span class="string">&#x27;32px&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;6&#x27;</span>: <span class="string">&#x27;48px&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œé—´è·æ¯”ä¾‹ç”± <code>padding</code>ã€ <code>margin</code>ã€ <code>width</code>ã€ <code>height</code>ã€ <code>maxHeight</code>ã€ <code>gap</code>ã€ <code>inset</code>ã€ <code>space</code> å’Œ <code>translate</code> æ ¸å¿ƒæ’ä»¶ç»§æ‰¿ã€‚</p>
<p>å¦‚w-6&#x3D;width:48px;</p>
<h4 id="ä¸€äº›å¸¸ç”¨çš„åŸå­ç±»ï¼š"><a href="#ä¸€äº›å¸¸ç”¨çš„åŸå­ç±»ï¼š" class="headerlink" title="ä¸€äº›å¸¸ç”¨çš„åŸå­ç±»ï¼š"></a>ä¸€äº›å¸¸ç”¨çš„åŸå­ç±»ï¼š</h4><p><code>w-&#123;size&#125;</code>å®½åº¦<code>max-w-&#123;size&#125;</code>sizeä¸€èˆ¬ä½¿ç”¨æ–­ç‚¹å¦‚md</p>
<p><code>h-&#123;size&#125;</code>é«˜åº¦<code>max-h-&#123;size&#125;</code>å…ƒç´ çš„æœ€å¤§é«˜åº¦</p>
<p><code>m&#123;t|r|b|l&#125;-&#123;size&#125;</code> åŠŸèƒ½ç±»æ§åˆ¶å…ƒç´ ä¸€ä¾§çš„å¤–è¾¹è·ã€‚</p>
<p><code>p&#123;t|r|b|l&#125;-&#123;size&#125;</code> åŠŸèƒ½ç±»æ§åˆ¶å…ƒç´ ä¸€ä¾§çš„å†…è¾¹è·ã€‚</p>
<p><code>gap-&#123;x|y|&#39; &#39;&#125;-&#123;size&#125;</code>æ§åˆ¶gridå’Œflexé—´è·ã€‚</p>
<p>displayåŠpositionå¸ƒå±€å¯ä»¥ç›´çœç•¥</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">grid å¸ƒå±€</span><br><span class="line">çˆ¶å…ƒç´ className=<span class="string">&#x27;grid grid-cols-1 gap-24 tablet:gap-32 desktop:gap-20 desktop:grid-cols-2&#x27;</span></span><br><span class="line">å­å…ƒç´ calssName=<span class="string">&#x27;col-span-2&#x27;</span>/<span class="string">&#x27;col-start-1 col-end-3&#x27;</span></span><br><span class="line">grid-cols-&#123;nums&#125; = grid-template-<span class="attr">columns</span>: <span class="title function_">repeat</span>(&#123;nums&#125;, <span class="title function_">minmax</span>(<span class="number">0</span>, 1fr));</span><br><span class="line">col-span-<span class="number">2</span> = grid-<span class="attr">column</span>: span <span class="number">2</span> / span <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">flexå¸ƒå±€</span><br><span class="line">className=<span class="string">&#x27;flex flex-col items-start justify-center&#x27;</span></span><br><span class="line"></span><br><span class="line">flex-col = flex-<span class="attr">direction</span>: column;</span><br><span class="line">items-start  = align-items : flex-start</span><br><span class="line">justify-center = justify-content : center</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/06/02/tailwindcss%E5%93%8D%E5%BA%94%E5%BC%8F%E9%85%8D%E7%BD%AE/" data-id="clie9n2150000uwrjcqvz4u4m" class="article-share-link">
        åˆ†äº«
      </a>
      
    </footer>

  </div>

  

  

</article>
    
    <article id="post-è·Ÿæ‰‹åŠ¨ç”»" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
      
  
  <h2 class="article-title" itemprop="name">
    <a href="/2023/03/13/%E8%B7%9F%E6%89%8B%E5%8A%A8%E7%94%BB/">è·Ÿæ‰‹åŠ¨ç”»</a>
  </h2>
  
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2023/03/13/%E8%B7%9F%E6%89%8B%E5%8A%A8%E7%94%BB/" class="article-date">
  <time datetime="2023-03-13T02:32:57.000Z" itemprop="datePublished">2023-03-13</time>
</a>
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      
      
        
      
      
        <h1 id="è·Ÿæ‰‹åŠ¨ç”»åŸç†"><a href="#è·Ÿæ‰‹åŠ¨ç”»åŸç†" class="headerlink" title="è·Ÿæ‰‹åŠ¨ç”»åŸç†"></a>è·Ÿæ‰‹åŠ¨ç”»åŸç†</h1><h2 id="å‰ç½®çŸ¥è¯†"><a href="#å‰ç½®çŸ¥è¯†" class="headerlink" title="å‰ç½®çŸ¥è¯†"></a>å‰ç½®çŸ¥è¯†</h2><h3 id="1-Intersection-Observer"><a href="#1-Intersection-Observer" class="headerlink" title="1.Intersection Observer"></a>1.Intersection Observer</h3><p><code>Intersection Observer API</code>æä¾›äº†ä¸€ç§<strong>å¼‚æ­¥</strong>æ£€æµ‹ç›®æ ‡å…ƒç´ ä¸ç¥–å…ˆå…ƒç´ æˆ–è§†å£(å¯ç»Ÿç§°ä¸ºæ ¹å…ƒç´ )<strong>ç›¸äº¤æƒ…å†µå˜åŒ–</strong>çš„æ–¹æ³•ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/IntersectionObserver">IntersectionObserveræ¥å£</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/7146441070828584968">https://juejin.cn/post/7146441070828584968</a></p>
<p><img src="/2023/03/13/%E8%B7%9F%E6%89%8B%E5%8A%A8%E7%94%BB/Api.png" alt="img"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> target = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.target&quot;</span>)</span><br><span class="line"></span><br><span class="line"> <span class="comment">//IntersectionObserveræ„é€ å™¨çš„callbackå‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">callback</span> = (<span class="params">entries</span>) =&gt;&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(entries[<span class="number">0</span>].<span class="property">intersectionRatio</span>)</span><br><span class="line">  <span class="keyword">if</span> (entries[<span class="number">0</span>].<span class="property">intersectionRatio</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&#x27;#333&#x27;</span>;</span><br><span class="line">    <span class="comment">// </span></span><br><span class="line">    <span class="comment">// observer.disconnect()</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&#x27;#fff&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//IntersectionObserveræ„é€ å™¨çš„optionå‡½æ•°</span></span><br><span class="line"> <span class="keyword">const</span> option = &#123;</span><br><span class="line">     <span class="attr">root</span>:root <span class="comment">//ç”¨ä½œè¾¹ç•Œçš„è§†å£ï¼Œé»˜è®¤ä¸ºè§†å£</span></span><br><span class="line">     rootMarginï¼š<span class="string">&quot;0px 0px 0px 0px&quot;</span> <span class="comment">//æ”¹å˜è¾¹ç•Œè§†å£çš„æ£€æµ‹èŒƒå›´ï¼Œç±»ä¼¼äºmargin</span></span><br><span class="line">     thresholdï¼š[<span class="number">0</span>,<span class="number">0.1</span>]æˆ–è€…<span class="number">0</span> <span class="comment">//æ•°ç»„æˆ–å…·ä½“å€¼,å½“ç›¸äº¤æ¯”ä¾‹è¶Šè¿‡è¿™äº›å€¼ï¼Œè§¦å‘callbackå‡½æ•°</span></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//é€šè¿‡IntersectionObserveræ„é€ å™¨æ„é€ ä¸€ä¸ªæ–°çš„IntersectionObserverå¯¹è±¡</span></span><br><span class="line"><span class="keyword">let</span> observer = <span class="keyword">new</span> <span class="title class_">IntersectionObserver</span>(callback,option)</span><br><span class="line"></span><br><span class="line"> <span class="comment">//è¯¥å¯¹è±¡æ‹¥æœ‰å››ä¸ªæ–¹æ³•</span></span><br><span class="line">observer.<span class="title function_">observe</span>(target)<span class="comment">//ç»‘å®šéœ€è¦æ£€æµ‹çš„å…ƒç´ targetï¼Œå¯ç»‘å®šå¤šä¸ª</span></span><br><span class="line">observer.<span class="title function_">observe</span>(target2)</span><br><span class="line">observer.<span class="title function_">unobserve</span>(target)<span class="comment">//è§£ç»‘å¯¹åº”å…ƒç´ </span></span><br><span class="line">observer.<span class="title function_">takeRecords</span>()<span class="comment">// è¿”å›ç›‘å¬çš„æ•°ç»„</span></span><br><span class="line">observer.<span class="title function_">disconnected</span>()<span class="comment">//è§£é™¤æ‰€æœ‰çš„ç›‘å¬</span></span><br></pre></td></tr></table></figure>

<p>[çº¿ä¸Šdemo]<a target="_blank" rel="noopener" href="https://code.juejin.cn/pen/7206227129149685792">https://code.juejin.cn/pen/7206227129149685792</a></p>
<p><img src="/2023/03/13/%E8%B7%9F%E6%89%8B%E5%8A%A8%E7%94%BB/2.jpg"></p>
<p><code>intersectionRect</code>å±æ€§ï¼Œä¼šè¿”å›targetä¸æ£€æµ‹è§†å£ç›¸äº¤çš„é«˜åº¦ã€‚</p>
<h3 id="2-Emittery"><a href="#2-Emittery" class="headerlink" title="2.Emittery"></a><strong>2.Emittery</strong></h3><h1 id="Emittery-ç®€å•è€Œç°ä»£çš„å¼‚æ­¥äº‹ä»¶å‘å°„å™¨"><a href="#Emittery-ç®€å•è€Œç°ä»£çš„å¼‚æ­¥äº‹ä»¶å‘å°„å™¨" class="headerlink" title="Emittery: ç®€å•è€Œç°ä»£çš„å¼‚æ­¥äº‹ä»¶å‘å°„å™¨"></a><strong>Emittery</strong><strong>: ç®€å•è€Œç°ä»£çš„å¼‚æ­¥äº‹ä»¶å‘å°„å™¨</strong></h1><p>å…³äºå¼‚æ­¥å®ç°çš„åŸç†å’Œä¼˜ç‚¹å¾…è¡¥å……</p>
<p>ä¸<code>EventEmitter</code>ï¼ˆåŒæ­¥å‘å°„å™¨ï¼‰çš„å¼‚åŒç‚¹å¾…è¡¥å……</p>
<p><a target="_blank" rel="noopener" href="https://www.5axxw.com/wiki/content/9kn3ui">Emitteryç®€ä»‹</a></p>
<h4 id="Emitteryå¸¸ç”¨æ–¹æ³•"><a href="#Emitteryå¸¸ç”¨æ–¹æ³•" class="headerlink" title="Emitteryå¸¸ç”¨æ–¹æ³•"></a>Emitteryå¸¸ç”¨æ–¹æ³•</h4><h4 id="on-eventName-eventName-listener-ç»‘å®šç›‘å¬"><a href="#on-eventName-eventName-listener-ç»‘å®šç›‘å¬" class="headerlink" title="on(eventName | eventName[], listener)ç»‘å®šç›‘å¬"></a>on(eventName | eventName[], listener)ç»‘å®šç›‘å¬</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Emittery</span> = <span class="built_in">require</span>(<span class="string">&#x27;emittery&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> emitter = <span class="keyword">new</span> <span class="title class_">Emittery</span>();</span><br><span class="line"></span><br><span class="line">emitter.<span class="title function_">on</span>(<span class="string">&#x27;ğŸ¦„&#x27;</span>, <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// emitterå¯¹è±¡çš„onæ–¹æ³•ï¼ŒeventNameç›‘å¬çš„äº‹ä»¶åï¼Œlistenerå›è°ƒå‡½æ•°</span></span><br><span class="line"></span><br><span class="line">emitter.<span class="title function_">on</span>([<span class="string">&#x27;ğŸ¦„&#x27;</span>, <span class="string">&#x27;ğŸ¶&#x27;</span>], <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">emitter.<span class="title function_">emit</span>(<span class="string">&#x27;ğŸ¦„&#x27;</span>, <span class="string">&#x27;ğŸŒˆ&#x27;</span>); <span class="comment">// è¾“å‡º &#x27;ğŸŒˆ&#x27; x2</span></span><br><span class="line">emitter.<span class="title function_">emit</span>(<span class="string">&#x27;ğŸ¶&#x27;</span>, <span class="string">&#x27;ğŸ–&#x27;</span>); <span class="comment">// è¾“å‡º &#x27;ğŸ–&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="off-eventName-eventName-listener-è§£é™¤ç›‘å¬"><a href="#off-eventName-eventName-listener-è§£é™¤ç›‘å¬" class="headerlink" title="off(eventName | eventName[], listener)è§£é™¤ç›‘å¬"></a>off(eventName | eventName[], listener)è§£é™¤ç›‘å¬</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Emittery</span> = <span class="built_in">require</span>(<span class="string">&#x27;emittery&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> emitter = <span class="keyword">new</span> <span class="title class_">Emittery</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">listener</span> = data =&gt; <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">        emitter.<span class="title function_">on</span>([<span class="string">&#x27;ğŸ¦„&#x27;</span>, <span class="string">&#x27;ğŸ¶&#x27;</span>, <span class="string">&#x27;ğŸ¦Š&#x27;</span>], listener);</span><br><span class="line">        <span class="keyword">await</span> emitter.<span class="title function_">emit</span>(<span class="string">&#x27;ğŸ¦„&#x27;</span>, <span class="string">&#x27;a&#x27;</span>); <span class="comment">//è¾“å‡ºa</span></span><br><span class="line">        <span class="keyword">await</span> emitter.<span class="title function_">emit</span>(<span class="string">&#x27;ğŸ¶&#x27;</span>, <span class="string">&#x27;b&#x27;</span>); <span class="comment">//è¾“å‡ºb</span></span><br><span class="line">        <span class="keyword">await</span> emitter.<span class="title function_">emit</span>(<span class="string">&#x27;ğŸ¦Š&#x27;</span>, <span class="string">&#x27;c&#x27;</span>); <span class="comment">//è¾“å‡ºc</span></span><br><span class="line">        emitter.<span class="title function_">off</span>(<span class="string">&#x27;ğŸ¦„&#x27;</span>, listener);</span><br><span class="line">        emitter.<span class="title function_">off</span>([<span class="string">&#x27;ğŸ¶&#x27;</span>, <span class="string">&#x27;ğŸ¦Š&#x27;</span>], listener);</span><br><span class="line">        <span class="keyword">await</span> emitter.<span class="title function_">emit</span>(<span class="string">&#x27;ğŸ¦„&#x27;</span>, <span class="string">&#x27;a&#x27;</span>); <span class="comment">// nothing happens</span></span><br><span class="line">        <span class="keyword">await</span> emitter.<span class="title function_">emit</span>(<span class="string">&#x27;ğŸ¶&#x27;</span>, <span class="string">&#x27;b&#x27;</span>); <span class="comment">// nothing happens</span></span><br><span class="line">        <span class="keyword">await</span> emitter.<span class="title function_">emit</span>(<span class="string">&#x27;ğŸ¦Š&#x27;</span>, <span class="string">&#x27;c&#x27;</span>); <span class="comment">// nothing happens</span></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<h4 id="once-eventName-eventName-then-listener-ç›‘å¬æ‰§è¡Œåè§£é™¤ç›‘å¬"><a href="#once-eventName-eventName-then-listener-ç›‘å¬æ‰§è¡Œåè§£é™¤ç›‘å¬" class="headerlink" title="once(eventName | eventName[]).then(listener)ç›‘å¬æ‰§è¡Œåè§£é™¤ç›‘å¬"></a>once(eventName | eventName[]).then(listener)ç›‘å¬æ‰§è¡Œåè§£é™¤ç›‘å¬</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Emittery</span> = <span class="built_in">require</span>(<span class="string">&#x27;emittery&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> emitter = <span class="keyword">new</span> <span class="title class_">Emittery</span>();</span><br><span class="line"></span><br><span class="line">emitter.<span class="title function_">once</span>(<span class="string">&#x27;ğŸ¦„&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">        <span class="comment">//=&gt; &#x27;ğŸŒˆ&#x27;</span></span><br><span class="line">&#125;);</span><br><span class="line">emitter.<span class="title function_">once</span>([<span class="string">&#x27;ğŸ¦„&#x27;</span>, <span class="string">&#x27;ğŸ¶&#x27;</span>]).<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">emitter.<span class="title function_">emit</span>(<span class="string">&#x27;ğŸ¦„&#x27;</span>, <span class="string">&#x27;ğŸŒˆ&#x27;</span>); <span class="comment">// log =&gt; &#x27;ğŸŒˆ&#x27; x2</span></span><br><span class="line">emitter.<span class="title function_">emit</span>(<span class="string">&#x27;ğŸ¶&#x27;</span>, <span class="string">&#x27;ğŸ–&#x27;</span>); <span class="comment">// ç›‘å¬å·²ç»è§¦å‘è¿‡ï¼Œnothing happens</span></span><br><span class="line">emitter.<span class="title function_">emit</span>(<span class="string">&#x27;ğŸ¦„&#x27;</span>, <span class="string">&#x27;ğŸŒˆ&#x27;</span>); <span class="comment">// ç›‘å¬å·²ç»è§¦å‘è¿‡ï¼Œnothing happens</span></span><br></pre></td></tr></table></figure>

<h3 id="3-resize-observer-polyfill"><a href="#3-resize-observer-polyfill" class="headerlink" title="3.resize-observer-polyfill"></a>3.resize-observer-polyfill</h3><p><code>resize-observer-polyfill</code>èƒ½ç«‹å³æ£€æµ‹å…ƒç´ ä½•æ—¶è°ƒæ•´å¤§å°å¹¶å°†å‡†ç¡®çš„å¤§å°ä¿¡æ¯è¿”å›ç»™å›è°ƒå‡½æ•°</p>
<p>ä»“åº“åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://github.com/juggle/resize-observer">https://github.com/juggle/resize-observer</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ResizeObserver</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@juggle/resize-observer&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ro = <span class="keyword">new</span> <span class="title class_">ResizeObserver</span>(<span class="function">(<span class="params">entries, observer</span>) =&gt;</span> &#123;</span><br><span class="line"> <span class="comment">//entrieså¯¹è±¡å±æ€§å¾…è¡¥å……</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Body has resized!&#x27;</span>);</span><br><span class="line">observer.<span class="title function_">disconnect</span>(); <span class="comment">// Stop observing</span></span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">ro.<span class="title function_">observe</span>(<span class="variable language_">document</span>.<span class="property">body</span>); <span class="comment">// Watch dimension changes on body</span></span><br></pre></td></tr></table></figure>

<h2 id="è·Ÿæ‰‹åŠ¨ç”»å®ç°-Scroom"><a href="#è·Ÿæ‰‹åŠ¨ç”»å®ç°-Scroom" class="headerlink" title="è·Ÿæ‰‹åŠ¨ç”»å®ç°-Scroom"></a>è·Ÿæ‰‹åŠ¨ç”»å®ç°-Scroom</h2><p><a target="_blank" rel="noopener" href="https://github.com/myWsq/scroom">Scroomä»“åº“åœ°å€</a></p>
<h3 id="ä¸»è¦åŸç†ï¼š"><a href="#ä¸»è¦åŸç†ï¼š" class="headerlink" title="ä¸»è¦åŸç†ï¼š"></a>ä¸»è¦åŸç†ï¼š</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// è·Ÿæ‰‹åŠ¨ç”»çš„å®¹å™¨é«˜åº¦ä¸€èˆ¬æ˜¯å¤§äºè§†å£çš„</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;wrapper&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height: 3000px&quot;</span>&gt;</span></span><br><span class="line">//æ’­æ”¾åŠ¨ç”»å…ƒç´ é€šè¿‡stickyå¸ƒå±€åœ¨æ»šåŠ¨ä¸­å›ºå®šä½ç½®</span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;player&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">&quot;width: 80%; position: sticky; top: 0; margin: 0 auto&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä¸Šæ–‡å·²ç»ä»‹ç»<code>intersectionRect</code>å±æ€§ï¼ˆtargetä¸æ£€æµ‹è§†å£ç›¸äº¤çš„é«˜åº¦ï¼‰ï¼Œä½†<code>intersectionRect</code>æœ€å¤§äº¤å‰é«˜åº¦å°äºç›‘æµ‹è§†å£&amp;Targeté«˜åº¦ï¼Œæ»‘åŠ¨å¤„åœ¨ä¸‹å›¾ä½ç½®æ—¶ï¼Œ<code>intersectionRect</code>çš„å€¼å°†å›ºå®šä¸º600pxï¼ˆç›‘æµ‹è§†å£ï¼‰ï¼Œæ­¤æ—¶åŠ¨ç”»çš„è¿›åº¦æ— æ³•è®¡ç®—</p>
<p><img src="/2023/03/13/%E8%B7%9F%E6%89%8B%E5%8A%A8%E7%94%BB/3.jpg"></p>
<p>åˆ©ç”¨<code>rootMargin</code>å±æ€§ï¼Œå°†ç›‘æµ‹è§†å£æ‰©å……åˆ°ä¸Targeté«˜åº¦ä¸€è‡´ï¼Œå°±å¯ä»¥å®ç°æ»šåŠ¨è¿‡ç¨‹<code>intersectionRect</code>å®æ—¶å˜åŒ–ï¼Œèƒ½å¤Ÿå®Œæ•´ç›‘æµ‹æ»šåŠ¨è¿‡ç¨‹.</p>
<p>è®¡ç®—ç›®æ ‡ä¸é»˜è®¤æµè§ˆå™¨è§†å£çš„å·®å€¼ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const bottomMargin =  target.clientHeight - window.innerHeight;</span><br><span class="line">rootMargin = `0px 0px $&#123;bottomMargin &#125;px 0px`;</span><br></pre></td></tr></table></figure>

<p><img src="/2023/03/13/%E8%B7%9F%E6%89%8B%E5%8A%A8%E7%94%BB/4.jpg"></p>
<p>ç”±äºè·Ÿæ‰‹åŠ¨ç”»è§¦å‘è¦åœ¨å®¹å™¨åˆ’å‡ºç›‘æµ‹è§†å£è§¦å‘ï¼Œç®€å•çš„åˆ¤æ–­æ–¹å¼å°±æ˜¯ï¼Œç›¸äº¤åŒºåŸŸtarget topå°äºtargetå…ƒç´ çš„topï¼Œè¯æ˜targetå·²ç»æœ‰ä¸€éƒ¨åˆ†åˆ’å‡ºç›‘æµ‹è§†å£ã€‚</p>
<p><code>isIntersecting</code> booleanå€¼ä»£è¡¨targetæ˜¯å¦è¿˜åœ¨ç›‘æµ‹è§†å£æœªå®Œå…¨åˆ’å‡º</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">isProgressing=``boundingClientRect.top &lt; intersectionRect.top`` &amp;&amp; isIntersecting;</span><br></pre></td></tr></table></figure>

<h3 id="å…·ä½“å®ç°"><a href="#å…·ä½“å®ç°" class="headerlink" title="å…·ä½“å®ç°"></a>å…·ä½“å®ç°</h3><p>è°ƒç”¨</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> target = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.wrapper&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> sc = <span class="title function_">createScroom</span>(&#123;</span><br><span class="line">    <span class="attr">target</span>: target ,</span><br><span class="line">    <span class="comment">// offsetè°ƒæ•´æ£€æµ‹è§†å£åç§»ï¼Œå½“offsetä¸º1æ—¶ï¼Œprogressåœ¨æµè§ˆå™¨è§†å£åº•éƒ¨è§¦å‘</span></span><br><span class="line">    <span class="comment">//ä¸º0æ—¶ï¼Œprogrssåœ¨æµè§ˆå™¨è§†å£é¡¶éƒ¨è§¦å‘</span></span><br><span class="line">    <span class="attr">offset</span>: <span class="number">0.5</span>,</span><br><span class="line">   &#125;);</span><br><span class="line">   <span class="comment">//ç»‘å®šprogresså¼‚æ­¥è§¦å‘å™¨</span></span><br><span class="line">    sc.<span class="title function_">on</span>(<span class="string">&quot;progress&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line"> &#125;);</span><br></pre></td></tr></table></figure>

<p>æ ¸å¿ƒä»£ç </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">createScroom</span> (options)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; target, offset = <span class="number">0.5</span>, threshold = <span class="number">4</span>, direction = <span class="string">&#x27;vertical&#x27;</span> &#125; = options;</span><br><span class="line">  <span class="keyword">const</span> emitter = <span class="keyword">new</span> <span class="title class_">Emittery</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// observer for intersecting</span></span><br><span class="line">  <span class="keyword">let</span> intersectionObserver = <span class="title function_">createIntersectionObserver</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// resizeObserver ç”Ÿæˆäº†ä¸€ä¸ªResizeObserverå¯¹è±¡åœ¨targetå°ºå¯¸å˜åŒ–æ—¶è§¦å‘resizeHandler</span></span><br><span class="line">  <span class="keyword">let</span> resizeObserver = <span class="title function_">createResizeObserver</span>();</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">createResizeObserver</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> observer = <span class="keyword">new</span> <span class="title class_">ResizeObserver</span>(resizeHandler);</span><br><span class="line">    <span class="keyword">return</span> observer;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">resizeHandler</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">//æ­¤å›è°ƒå‡½æ•°åœ¨targetå°ºå¯¸å˜åŒ–æ—¶è§¦å‘,é”€æ¯æ‰€æœ‰æ»šåŠ¨ç›‘å¬ï¼Œå¹¶é‡æ–°ç»‘å®š</span></span><br><span class="line">    intersectionObserver.<span class="title function_">disconnect</span>();</span><br><span class="line">    intersectionObserver = <span class="title function_">createIntersectionObserver</span>();</span><br><span class="line">    intersectionObserver.<span class="title function_">observe</span>(target);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">createIntersectionObserver</span>(<span class="params"></span>) &#123;</span><br><span class="line">     .....<span class="comment">//ç”ŸæˆIntersection Observeræ ¸å¿ƒä»£ç ï¼Œä¸‹æ–‡åˆ†æ</span></span><br><span class="line">    <span class="keyword">return</span> observer;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">destroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">    intersectionObserver.<span class="title function_">disconnect</span>();</span><br><span class="line">    resizeObserver.<span class="title function_">disconnect</span>();</span><br><span class="line">    emitter.<span class="title function_">clearListeners</span>();</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, resizeHandler);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ©ç”¨ä¸Šæ–‡resize-observer-polyfillç›‘è§†targetå°ºå¯¸å˜åŒ–</span></span><br><span class="line">  resizeObserver.<span class="title function_">observe</span>(target);</span><br><span class="line">    <span class="comment">// ç›‘è§†æµè§ˆå™¨è§†å£çš„å˜åŒ–</span></span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, resizeHandler);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¿”å›å¯¹è±¡å¸¦æœ‰çš„ä¸¤ä¸ªå¯¹è±¡ï¼Œå››ä¸ªæ–¹æ³•</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    target,</span><br><span class="line">    <span class="attr">observer</span>: intersectionObserver,</span><br><span class="line">    destroy,</span><br><span class="line">    <span class="attr">on</span>: emitter.<span class="property">on</span>.<span class="title function_">bind</span>(emitter),</span><br><span class="line">    <span class="attr">once</span>: emitter.<span class="property">once</span>.<span class="title function_">bind</span>(emitter),</span><br><span class="line">    <span class="attr">off</span>: emitter.<span class="property">off</span>.<span class="title function_">bind</span>(emitter),</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>**<code>IntersectionObserver</code>**å¯¹è±¡ç”Ÿæˆå‡½æ•°</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//const &#123; target, offset = 0.5, threshold = 4, direction = &#x27;vertical&#x27; &#125;éœ€è¦å‚æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createIntersectionObserver</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">rootMargin</span>: string;</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">thresholdStep</span>: number;</span><br><span class="line">    <span class="comment">//æ ¹æ®æµè§ˆå™¨è§†å£é«˜åº¦åŠoffsetè°ƒèŠ‚ç›‘æµ‹è§†å£</span></span><br><span class="line">    <span class="keyword">const</span> m1 = -offset * <span class="variable language_">window</span>.<span class="property">innerHeight</span>;</span><br><span class="line">    <span class="keyword">const</span> m2 = (offset - <span class="number">1</span>) * <span class="variable language_">window</span>.<span class="property">innerHeight</span> + target.<span class="property">clientHeight</span>;</span><br><span class="line">    rootMargin = <span class="string">`<span class="subst">$&#123;m1&#125;</span>px 0px <span class="subst">$&#123;m2&#125;</span>px 0px`</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//IntersectionObserverå¯¹è±¡å›è°ƒå‡½æ•°çš„è§¦å‘æ—¶æœºï¼Œ</span></span><br><span class="line">    <span class="comment">//å³thresholdï¼ˆå±æ€§ï¼‰ï¼Œå¯ä»¥ç†è§£ä¸ºæ¯thresholdpxï¼ˆå‚æ•°ï¼‰è§¦å‘ä¸€æ¬¡ï¼Œï¼ˆå‘½åé‡å¤ï¼‰</span></span><br><span class="line">    thresholdStep = threshold / target.<span class="property">clientHeight</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> isIntersectingLastTick = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">let</span> progressLastTick = -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> isFirstEnter = <span class="literal">true</span>;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      isFirstEnter = <span class="literal">false</span>;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> observer = <span class="keyword">new</span> <span class="title class_">IntersectionObserver</span>(</span><br><span class="line">      <span class="function">(<span class="params">[entry]</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// boundingClientRect</span></span><br><span class="line">        <span class="keyword">const</span> &#123; </span><br><span class="line">        <span class="comment">//targetç»‘å®šå…ƒç´ çš„å°ºå¯¸å¯¹è±¡</span></span><br><span class="line">        <span class="attr">boundingClientRect</span>: client, </span><br><span class="line">        <span class="comment">//targetç»‘å®šå…ƒç´ ä¸æµè§ˆå™¨ç›¸äº¤çš„å°ºå¯¸å¯¹è±¡</span></span><br><span class="line">        <span class="attr">intersectionRect</span>: rect, </span><br><span class="line">        <span class="comment">//å…ƒç´ æ˜¯å¦åœ¨ç›‘æµ‹è§†å£</span></span><br><span class="line">        isIntersecting &#125; = entry;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> isProgressing = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">let</span> progress = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å½“æ£€æµ‹çš„å…ƒç´ ä¸Šè¾¹ç•Œå®Œå…¨åˆ’è¿‡è§†å£ &amp;&amp; å…ƒç´ æœªå®Œå…¨æ¶ˆå¤±isProgressing=true</span></span><br><span class="line">        <span class="comment">//client.top &lt; rect.topä¿è¯äº†å®¹å™¨åœ¨åˆ’å‡ºè§†å£æ—¶è¿›å…¥Progressing</span></span><br><span class="line">        isProgressing = client.<span class="property">top</span> &lt; rect.<span class="property">top</span> &amp;&amp; isIntersecting;</span><br><span class="line">        <span class="comment">// æ ¹æ®ç›¸äº¤é«˜åº¦åŠå…ƒç´ æ€»é«˜åº¦è®¡ç®—è¿›åº¦</span></span><br><span class="line">        progress = <span class="number">1</span> - rect.<span class="property">height</span> / client.<span class="property">height</span>;</span><br><span class="line"></span><br><span class="line">        isIntersectingLastTick = isProgressing;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> <span class="title function_">emitProgress</span> = (<span class="params">progress</span>) =&gt; &#123;</span><br><span class="line">          <span class="keyword">if</span> (progressLastTick !== progress) &#123;</span><br><span class="line">          <span class="comment">//å¼‚æ­¥è§¦å‘å™¨çš„è§¦å‘ï¼Œéœ€è¦åœ¨è°ƒç”¨å¤„.onç»‘å®šprogressè§¦å‘å™¨</span></span><br><span class="line">            emitter.<span class="title function_">emit</span>(<span class="string">&#x27;progress&#x27;</span>, &#123;</span><br><span class="line">              target,</span><br><span class="line">              progress,</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;</span><br><span class="line">          progressLastTick = progress;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (isProgressing &amp;&amp; progressLastTick !== progress) &#123;</span><br><span class="line">          <span class="title function_">emitProgress</span>(progress);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        rootMargin,</span><br><span class="line">        <span class="attr">threshold</span>: <span class="title function_">genRange</span>(<span class="number">0</span>, <span class="number">1</span>, thresholdStep),</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">return</span> observer;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/03/13/%E8%B7%9F%E6%89%8B%E5%8A%A8%E7%94%BB/" data-id="clf6inx0z0000d4rjc46n7gya" class="article-share-link">
        åˆ†äº«
      </a>
      
    </footer>

  </div>

  

  

</article>
    
  </article>
  

  
</section>
</div>
    <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>Hexo &copy; 2023</li>
      
        <li>
          
            <a href="https://beian.miit.gov.cn/" target="_blank"></a>
            
        </li>
      
      <li>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></li>
      <li>theme  <a target="_blank" rel="noopener" href="https://github.com/zhwangart/hexo-theme-ocean">Ocean</a></li>
    </ul>
    <p><ul class="list-inline">
  
  <li><i class="fe fe-bar-chart tooltip" data-tooltip="PV"></i> <span id="busuanzi_value_site_pv"></span></li>
  
  <li><i class="fe fe-smile-alt tooltip" data-tooltip="UV"></i> <span id="busuanzi_value_site_uv"></span></li>
  
</ul></p>
  </div>
</footer>
  </main>
  <aside class="sidebar">
    <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/hexo.svg" alt="Hexo"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">Home</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">Archives</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/gallery">Gallery</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">About</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link nav-item-search" title="æœç´¢">
        <i class="fe fe-search"></i>
        æœç´¢
      </a>
    </li>
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      <div class="totop" id="totop">
  <i class="fe fe-rocket"></i>
</div>
    </li>
    <li class="nav-item">
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="fe fe-feed"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
  </aside>
  
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/jquery.justifiedGallery.min.js"></script>


<script src="/js/lazyload.min.js"></script>


<script src="/js/busuanzi-2.3.pure.min.js"></script>



<script src="/fancybox/jquery.fancybox.min.js"></script>






<script src="/js/ocean.js"></script>

</body>

</html>